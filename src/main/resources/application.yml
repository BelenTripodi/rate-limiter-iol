server:
  port: 8080

spring:
  application:
    name: rate-limiter
  data:
    redis:
      host: localhost
      port: 6379

ratelimiter:
  mode: REDIS # switch to REDIS when Redis is running
  failStrategy: FAIL_OPEN # FAIL_OPEN or FAIL_CLOSED
  rules:
    # Global: 10 requests burst, refills 5 tokens/sec (â‰ˆ300/min) per API key
    - name: apiKey-global
      pathPattern: "/**"
      keyStrategy: API_KEY
      capacity: 200
      refillTokensPerSecond: 150
      cost: 1

    # Example stricter rule for a heavy endpoint
    - name: search-heavy
      pathPattern: "/v1/search/**"
      keyStrategy: API_KEY
      capacity: 5
      refillTokensPerSecond: 1.0
      cost: 1
